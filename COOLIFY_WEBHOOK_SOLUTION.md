# Решение проблемы с webhook в Coolify

## Текущая ситуация

✅ Репозиторий подключен: `imuzolev/medkit`  
✅ Ветка: `main`  
✅ Auto Deploy включен  
❌ Webhook возвращает 302 (редирект на login)  
❌ Нет возможности отключить/переподключить GitHub в "Git Source"

## Решения

### Решение 1: Проверить автоматически созданный webhook в GitHub

Coolify мог автоматически создать webhook при первоначальном подключении:

1. Откройте: `https://github.com/imuzolev/medkit/settings/hooks`
2. Проверьте все webhooks в списке
3. Ищите webhook, который был создан автоматически Coolify (не тот, который вы добавили вручную)
4. Если такой webhook есть:
   - Проверьте его URL
   - Проверьте "Recent Deliveries" - должны быть успешные запросы
   - Если он работает, удалите ручной webhook с `/manual`

### Решение 2: Использовать ручной деплой (работает надежно)

Пока автоматический webhook не настроен:

1. После каждого `git push` в GitHub
2. Откройте Coolify UI: `http://2.56.240.119:8888`
3. Перейдите в ваше приложение
4. Нажмите кнопку **"Deploy"** (справа вверху, желтая кнопка)
5. Coolify автоматически получит последний commit и задеплоит

**Преимущества:**
- Работает всегда
- Вы контролируете, когда деплоить
- Не требует настройки webhook

**Недостатки:**
- Нужно нажимать кнопку вручную после каждого push

### Решение 3: Использовать GitHub Actions для автоматического деплоя

Можно настроить GitHub Actions, который будет вызывать "Deploy Webhook" из Coolify:

1. Создайте файл `.github/workflows/deploy.yml` в репозитории
2. Используйте "Deploy Webhook" URL из раздела "Webhooks" в Coolify
3. Добавьте токен авторизации в GitHub Secrets

Но это требует настройки токена.

### Решение 4: Проверить настройки в разделе "Webhooks"

1. В Coolify UI откройте раздел **"Webhooks"** (в левом меню)
2. Проверьте, есть ли там автоматический webhook URL (без `/manual`)
3. Если есть, используйте его в GitHub

## Рекомендация

**Используйте ручной деплой (Решение 2)** - это самый простой и надежный способ:

1. Работает всегда
2. Не требует сложной настройки
3. Вы контролируете процесс
4. Занимает всего несколько секунд после push

Просто нажимайте кнопку "Deploy" в Coolify UI после каждого `git push`.

# Исправление конфигурации порта

## Текущая ситуация

✅ Dockerfile обновлен - экспонирует порты 3000 и 5000  
✅ Coolify настроен на порт 3000 (Ports Exposes: 3000, Port Mappings: 3000:3000)  
❓ Нужно проверить переменную окружения PORT

## Решение: Добавить переменную окружения PORT

В Coolify нужно установить переменную окружения `PORT=3000`, чтобы приложение использовало правильный порт.

### Шаг 1: Добавить переменную окружения в Coolify

1. В Coolify UI откройте ваше приложение
2. Перейдите в раздел **"Environment Variables"** (в левом меню)
3. Добавьте новую переменную:
   - **Key:** `PORT`
   - **Value:** `3000`
4. Нажмите **"Save"**

### Шаг 2: Перезапустить приложение

После добавления переменной окружения:

1. Нажмите кнопку **"Deploy"** (или перезапустите приложение)
2. Coolify пересоберет контейнер с новой переменной окружения
3. Приложение запустится на порту 3000

### Шаг 3: Проверить работу

1. Откройте `aimedkit.ru` в браузере
2. Ошибка "Bad Gateway" должна исчезнуть
3. Приложение должно работать корректно

## Проверка текущих переменных окружения

Если переменная PORT уже есть, проверьте её значение:
- Должно быть `PORT=3000`
- Если значение другое (например, 5000), измените на 3000

## Альтернатива: Если переменная не помогает

Если после добавления PORT=3000 проблема остается:

1. Проверьте логи в Coolify (вкладка "Logs")
2. Посмотрите, на каком порту реально запускается приложение
3. Убедитесь, что приложение слушает на `0.0.0.0:3000`, а не на `127.0.0.1:3000`

В app.py уже правильно настроено:
```python
app.run(debug=False, host='0.0.0.0', port=port, use_reloader=False)
```

Это означает, что приложение будет слушать на всех интерфейсах, что правильно для Docker.

# Исправление проблемы с автоматическим деплоем

## Проблема
Webhook успешно доставляется (200 OK), но деплой не запускается автоматически.

## Возможные причины

1. **Webhook URL содержит `/manual`** - это может означать ручной триггер
2. **Автоматический деплой не включен** в настройках Coolify
3. **Неправильный тип webhook** - нужен автоматический, а не ручной

## Решения

### Решение 1: Запустить деплой вручную (быстро)

1. Откройте Coolify UI: `http://2.56.240.119:8888`
2. Перейдите в ваше приложение
3. Нажмите кнопку **"Deploy"** (справа вверху)
4. Coolify автоматически получит последний commit и задеплоит

### Решение 2: Проверить настройки автоматического деплоя

1. В Coolify UI откройте ваше приложение
2. Перейдите в **"Configuration"** или **"Settings"**
3. Найдите раздел **"Auto Deploy"** или **"Automatic Deployment"**
4. Убедитесь, что включено:
   - ✅ **"Auto Deploy"** - включено
   - ✅ **"Deploy on Push"** - включено
   - ✅ Ветка: `main`

### Решение 3: Найти правильный автоматический webhook URL

1. В Coolify UI откройте ваше приложение
2. Перейдите в **"Configuration"** или **"Settings"**
3. Найдите раздел **"Source"** или **"Git Integration"**
4. Ищите **"Webhook URL"** БЕЗ `/manual` в конце
5. Правильный URL должен быть примерно таким:
   ```
   http://2.56.240.119:8888/webhooks/source/github/events
   ```
   или
   ```
   http://2.56.240.119:8888/api/v1/webhooks/github/<webhook_id>
   ```

### Решение 4: Пересоздать подключение к GitHub

1. В Coolify UI откройте настройки приложения
2. Удалите текущее подключение к GitHub
3. Добавьте заново:
   - Нажмите **"Connect GitHub"** или **"Add Source"**
   - Авторизуйтесь через GitHub OAuth
   - Выберите репозиторий `imuzolev/medkit`
   - Выберите ветку `main`
   - Включите **"Auto Deploy"**
4. Скопируйте новый webhook URL (должен быть БЕЗ `/manual`)
5. Обновите webhook в GitHub:
   - Откройте: `https://github.com/imuzolev/medkit/settings/hooks`
   - Удалите старый webhook
   - Добавьте новый с правильным URL

## Проверка работы

После исправления:

1. Сделайте небольшое изменение в коде
2. Commit и push:
   ```bash
   git add .
   git commit -m "Test auto deploy"
   git push
   ```
3. Проверьте в Coolify UI - должен начаться автоматический деплой
4. Проверьте в GitHub webhooks - должен быть успешный запрос

## Альтернатива: Использовать кнопку "Deploy" вручную

Если автоматический деплой не работает, можно использовать ручной деплой:

1. После каждого push в GitHub
2. Откройте Coolify UI
3. Нажмите кнопку **"Deploy"**
4. Coolify получит последний commit и задеплоит

Это не так удобно, но работает надежно.

# Диагностика проблемы с деплоем

## Текущая ситуация

❌ Сайт не работает (Bad Gateway)  
❌ Логи пустые ("No logs yet")  
✅ Деплой завершился успешно

## Шаги диагностики

### Шаг 1: Проверить переменную окружения PORT

1. В Coolify UI откройте ваше приложение
2. Перейдите в раздел **"Environment Variables"**
3. Убедитесь, что есть переменная:
   - **Key:** `PORT`
   - **Value:** `3000`
4. Если переменной нет, добавьте её и сохраните

### Шаг 2: Задеплоить обновление с логами

1. В Coolify UI нажмите кнопку **"Deploy"**
2. Дождитесь завершения деплоя
3. Перейдите в раздел **"Logs"**
4. Теперь должны появиться логи:
   - `Starting Flask application on port 3000` (или другой порт)
   - `PORT environment variable: 3000` (или `not set`)

### Шаг 3: Проверить логи после деплоя

После деплоя с обновленным кодом:

1. Откройте вкладку **"Logs"** в Coolify
2. Проверьте, что появились логи запуска
3. Если видите ошибки, скопируйте их

### Шаг 4: Проверить настройки сети

1. В Coolify UI откройте раздел **"Configuration"** → **"Network"**
2. Убедитесь:
   - **Ports Exposes:** `3000`
   - **Port Mappings:** `3000:3000`

### Шаг 5: Проверить статус контейнера

1. В Coolify UI откройте вкладку **"Terminal"**
2. Попробуйте подключиться к контейнеру
3. Или проверьте статус через SSH на сервере:
   ```bash
   ssh root@2.56.240.119
   docker ps | grep uksoc0wgw08gk848s4kokg8c
   docker logs <container_id>
   ```

## Возможные проблемы и решения

### Проблема 1: Переменная PORT не установлена

**Решение:** Добавьте `PORT=3000` в разделе "Environment Variables"

### Проблема 2: Приложение не запускается

**Признаки:** Нет логов, контейнер не отвечает

**Решение:**
1. Проверьте логи на наличие ошибок
2. Проверьте, что все зависимости установлены
3. Проверьте, что Dockerfile правильный

### Проблема 3: Порт не совпадает

**Признаки:** Приложение запускается, но сайт не работает

**Решение:**
1. Убедитесь, что `PORT=3000` в переменных окружения
2. Убедитесь, что Port Mappings: `3000:3000`
3. Перезапустите приложение

### Проблема 4: Проблемы с доменом/прокси

**Признаки:** Приложение работает, но Bad Gateway

**Решение:**
1. Проверьте настройки домена в Coolify
2. Проверьте, что прокси правильно настроен
3. Проверьте SSL сертификат (если используется HTTPS)

## Что делать сейчас

1. **Добавьте переменную `PORT=3000`** в разделе "Environment Variables" (если еще не добавлена)
2. **Нажмите "Deploy"** в Coolify UI
3. **Проверьте логи** после деплоя - должны появиться сообщения о запуске
4. **Проверьте сайт** `aimedkit.ru`

Если после этого сайт не заработает, пришлите логи из Coolify - там будет видно, в чем проблема.
